---
import {basics} from '@cv'
import Section from '@/components/Section.astro'
import Envelope from '@/components/icons/envelope.svg'
import Phone from '@/components/icons/phone.svg'
import Github from '@/components/icons/github.svg'
import Globe from '@/components/icons/globe.svg'
import Instagram from '@/components/icons/instagram.svg'
import Linkedin from '@/components/icons/linkedin.svg'
import X from '@/components/icons/twitter-x.svg'




const { name, label, image, email, phone, location, profiles } = basics
const {city, region} = location

const SOCIAL_ICONS: Record<string, any> = {
    Github, Instagram, Linkedin, X
}

const linkedInfo = profiles.find(({ network }) => network === "Linkedin")
const linkedUrl = linkedInfo?.url

const printInfo = [email, phone, linkedUrl].filter(Boolean).join(" | ")
---
<Section>
<div class="container">
<div class="info">
    <h1>{name}</h1>
    <h2>{label}</h2>
    <span>
        <Globe /> {city}, {region}
    </span>
    <footer>
        <div class="print">
            {email} | {phone} | {linkedUrl}
        </div>
        {
            email && (
                <a 
                href={`mailto:${email}`} 
                title={`EnvÃ­a un correo a ${name} ao correo ${email}`}
                target="_blank"
                rel="noopener noreferrer"><Envelope /></a>
            )
        }

        {
            phone && (
                <a 
                href={`tel:${phone}`} 
                title={`Chamar po telefono a ${name} ao numero ${phone}`}
                target="_blank"
                rel="noopener noreferrer"><Phone /></a>
            )
        }
        {
            profiles.map(({network, url, username}) => {
                const Icon = SOCIAL_ICONS[network]

                return(
                    <a 
                href={url} 
                title={`Visitar o perfil de ${username} en ${network}`}
                target="_blank"
                rel="noopener noreferrer"><Icon /></a>
                )

            }
        )
        }
    </footer>
</div>
<figure><img src={image} alt={name}></figure>
</div>
</Section>

<style>
    .container {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
    }
    .info {
        display: flex;
        flex-direction: column;
        gap: 0.05rem;
        padding-right: 32px;

    }
    h1 {
        font-size: 2rem;
    }
    h2 {
        color: #444;
        font-weight: 500;
        font-size: 1.1rem;
        text-wrap: balance;
    }

img {
    aspect-ratio: 1/1;
    object-fit: cover;
    width: 128px;
    border-radius: 50%;
}

span {
    color: #666;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: .85rem;
    letter-spacing: -0.05rem;
}

footer {
    font-size: 0.65rem;
    display: flex;
    gap: 4px;
    margin-top: 8px;
}

footer a {
    color: #777;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #eee;
    padding: 4px;
    height: 32px;
    width: 32px;
    border-radius: 6px;
    transition: all 0.3s ease;
}

footer a:hover {
    background: #eee;
    border: 1px solid #ddd;
}

.print {
    display: none;
}

@media print {
    .print {
    display: block;
}

footer a {
    display: none;
}
}
</style>
